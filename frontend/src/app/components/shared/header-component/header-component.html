<header [class.scrolled]="isScrolled">
  <img src="logo-white.png" alt="Dental Clinic Logo">

  <!-- Hamburger Button (visible on mobile) -->
  <button class="hamburger-button" (click)="toggleMobileMenu()" [class.open]="isMobileMenuOpen" aria-label="Toggle navigation">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>

  <!-- Desktop Navigation (hidden on mobile) -->
  <div class="content desktop-nav">
    <nav>
      <ul class="nav-list">
        @for (item of navItems; track item.label) {
          <li class="nav-item">
            @if (item.route) {
              <a [routerLink]="item.route" class="nav-link">{{ item.label }}</a>
            } @else {
              <span class="nav-link">{{ item.label }}</span>
            }

            @if (item.subItems) {
              <div class="dropdown-menu">
                <ul class="dropdown-list">
                  @for (subItem of item.subItems; track subItem.label) {
                    <li class="dropdown-item-wrapper">
                      @if (subItem.route) {
                        <a [routerLink]="subItem.route" class="dropdown-item">{{ subItem.label }}</a>
                      } @else {
                        <span class="dropdown-item" [class.has-submenu]="subItem.subItems">{{ subItem.label }}</span>
                      }

                      @if (subItem.subItems) {
                        <div class="nested-dropdown">
                          <ul class="nested-dropdown-list">
                            @for (nestedItem of subItem.subItems; track nestedItem.label) {
                              <li class="nested-dropdown-item-wrapper">
                                <a [routerLink]="nestedItem.route!" class="dropdown-item">{{ nestedItem.label }}</a>
                              </li>
                            }
                          </ul>
                        </div>
                      }
                    </li>
                  }
                </ul>
              </div>
            }
          </li>
        }

        <li class="phone-number">{{ phoneNumber }}</li>
      </ul>
    </nav>

    <button class="appointment-btn">Request Appointment</button>
  </div>

  <!-- Mobile Sidebar Menu -->
  <div class="mobile-sidebar" [class.open]="isMobileMenuOpen">
    <nav class="mobile-nav">
      @for (item of navItems; track item.label) {
        <div class="mobile-menu-item">
          @if (item.subItems) {
            <button class="mobile-menu-toggle"
                    (click)="toggleSubmenu(item.label)"
                    [class.expanded]="expandedMenuItems[item.label]">
              <span>{{ item.label }}</span>
              <span class="accordion-icon">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </button>
            <div class="mobile-submenu" [class.expanded]="expandedMenuItems[item.label]">
              @for (subItem of item.subItems; track subItem.label) {
                @if (subItem.route) {
                  <a [routerLink]="subItem.route" class="mobile-submenu-item" (click)="closeMobileMenu()">
                    {{ subItem.label }}
                  </a>
                } @else if (subItem.subItems) {
                  <div class="mobile-submenu-item has-children"
                       (click)="toggleSubmenu(getMenuKey(item.label, subItem.label))"
                       [class.expanded]="expandedMenuItems[getMenuKey(item.label, subItem.label)]">
                    {{ subItem.label }}
                  </div>
                  <div class="nested-mobile-submenu" [class.expanded]="expandedMenuItems[getMenuKey(item.label, subItem.label)]">
                    @for (nestedItem of subItem.subItems; track nestedItem.label) {
                      <a [routerLink]="nestedItem.route!" class="nested-mobile-submenu-item" (click)="closeMobileMenu()">
                        {{ nestedItem.label }}
                      </a>
                    }
                  </div>
                }
              }
            </div>
          } @else {
            <a [routerLink]="item.route!" class="mobile-menu-link" (click)="closeMobileMenu()">
              {{ item.label }}
            </a>
          }
        </div>
      }

      <!-- Phone Number -->
      <div class="mobile-menu-item mobile-phone">
        <a href="tel:+381664448435">{{ phoneNumber }}</a>
      </div>

      <!-- Request Appointment Button -->
      <div class="mobile-menu-item mobile-appointment">
        <button class="appointment-button">Request Appointment</button>
      </div>
    </nav>
  </div>

  <!-- Overlay -->
  <div class="mobile-overlay" [class.open]="isMobileMenuOpen" (click)="closeMobileMenu()"></div>
</header>
